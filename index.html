<!DOCTYPE html>
<html>
<head>
	<!--/////////PAGE DESIGN///////////////-->
	<meta charset="utf-8">
	<title>poli[notas]</title>
	<meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width, height=device-height, target-densitydpi=device-dpi" />
	<meta http-equiv="X-UA-Compatible" content="ie=edge">
	<meta content="poli[notas], tu calculadora de notas perfecta" name="description">
	<!--Fav-->
    <link href="./img/icons/exam.png" rel="shortcut icon">
	<!--/////////PAGE DESIGN END///////////-->

	<!--//////////////FONTS////////////////-->
	<link href="https://fonts.googleapis.com/css?family=Roboto" rel="stylesheet"> 
	<link href="https://fonts.googleapis.com/css?family=Righteous" rel="stylesheet">
	<!--///////////FONTS END///////////////-->

	<!--/////////////CSS///////////////////-->
	<link rel="stylesheet" type="text/css" href="css/navbar_style.css">
	<link rel="stylesheet" type="text/css" href="fonts/fuentes.css">
	<!--Bootstrap-->
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
	<link rel="stylesheet" type="text/css" href="style.css">
	<!--effects-->
  	<link rel="stylesheet" type="text/css" href="css/effects.scss">
	<!--/////////////CSS END///////////////-->
	
	<!--/////////////JS///////////////-->
	<!--Slider-->
	<script src="js/jquery.flexslider.js"></script>
	<!--Calendar styles end-->
	<script type="text/javascript" src="js/window-scroll.js"></script>
	<!--Load the AJAX API-->
    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>

	<script type="text/javascript">
		/*function myFunction() {
		  if (document.body.scrollTop > 50 || document.documentElement.scrollTop > 50) {
		    document.getElementById("navbarf").className = "barra";
		  } else {
		    document.getElementById("navbarf").className = "";
		  }
		}*/
	</script>
	<link rel="stylesheet" href="nav_style.css">
  <script src="sticky.js"></script>
	<!--////////////JS END/////////////-->
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
</head>
<body id="poliNotas">
	<!--HOME-->
	<div id="home" class="container-fluid" style="z-index: 2;">
		<div class="row">
			<div class="burger col-md-0 col-0" style="position: fixed; z-index: 9999;">
				<div class="lin1"></div>
				<div class="lin2"></div>
				<div class="lin3"></div>
			</div>
			<div class="col-md-2 col-0" id="menu">
				<div>
					<img src="./img/LogoUPV.png" alt="Logo" class="logo">
				</div>
				<div>
					<img src="./img/poliNotas.png" alt="Logo" class="logo">
				</div>
				<div class="menu_prop">
					<ul	class="lin">
						<li id="button_inicio" class="button_menu" onclick="selectDIV(1)">Inicio</li>
					</ul>
					<ul	class="lin">
						<li id="button_asignatura" class="button_menu" onclick="selectDIV(2); ">Asignaturas</li>
					</ul>
					<ul	class="lin">
						<li id="button_add_asignatura" class="button_menu" onclick="selectDIV(3)">Crear asignatura</li>
					</ul>
					<ul class="lin">
						<li ><h1 style="font-size: 10px;color: blue;">Creado por Vladyslav Mazurkevych</h1></li>
					</ul>
				</div>
			</div>

			<div class="col-md-10 col-12 container-fluid programa" id="main">
				<iframe id="iframe"
				    width="100%"
				    height="100vh"
				    src="http://www.upv.es/">
				</iframe> 
				<div id="mainMobile">
					<div>
						<img src="./img/LogoUPV.png" alt="Logo" class="logo-m">
					</div>
					<div>
						<img src="./img/poliNotas.png" alt="Logo" class="logo-m">
					</div>
					<div class="menu_prop">
						<ul	class="lin">
							<li id="button_asignatura" class="button_menu" onclick="selectDIV(2);mostrarListaAsignaturas()">Asignaturas</li>
						</ul>
						<ul	class="lin">
							<li id="button_add_asignatura" class="button_menu" onclick="selectDIV(3)">Crear asignatura</li>
						</ul>
					</div>
					<div>
						<h5 style="color:blue; font-size: 15px;margin-top:30px;">
							< Version Pre-Alpha, keep calm y no suspendas!! >
						</h5>
					</div>
				</div>
			</div>
	
			<div class="col-md-10 col-12 programa asignaturas_list_div" id="asignaturas">
		    	<h1 style="margin-top:6vh;text-align:center;">Asignaturas disponibles</h1>
		    	<hr>
		    	<ul id="asignaturas_list">
					<li>Asignatura 1</li>
					<li>Asignatura 2</li>
				</ul>
				<hr style="margin-bottom: 0;">			    	
			</div>
			
			<!--Crear asignatura-->
			<div class="col-md-10 col-12 programa" id="creaAsignatura">
				<div class="asignaturas_title">
					<h1 style="margin-top:5vh;">Crear asignatura</h1>
					<hr>						
					<div class="row container-fluid" style="display:flex;">
						<div class="col-md-3 col-12 fila">
								<h1 class="propiedades_enu">Nom. escuela:</h1>
						</div>
						<div class="col-md-3 col-12 fila">
								<input id="nomEscuela_f" class="input-res" name="textfield" type="text" placeholder="ETSINF">
						</div>
						<div class="col-md-3 col-12 fila">
								<h1 class="propiedades_enu">Nom. asignatura:</h1>
						</div>
						<div class="col-md-3 col-12 fila">
								<input id="nomAsignatura_f" class="input-res" name="textfield" type="text" placeholder="FOE">
						</div>
					</div>
					<hr>
					<br>
					<h1 style="margin-top:5vh;">Actos de evaluaci√≥n: </h1>
					<hr>
					<div class="row container-fluid" style="display:flex;">
						<div class="col-md-2 col-12 fila">
							<h1 class="propiedades_enu">Tipo de acto:</h1>
						</div>
						<div class="col-md-2 col-12 fila">
							<input id="tipoActo_f" class="input-res" name="textfield" type="text" placeholder="Examen">
						</div>
						<div class="col-md-2 col-12 fila">
							<h1 class="propiedades_enu">Nota m√≠nima:</h1>
						</div>
						<div class="col-md-1 col-12 fila">
							<input id="notaMin_f" class="input-res" name="textfield" type="text" placeholder="4">
						</div>
						<div class="col-md-2 col-12 fila">
							<h1 class="propiedades_enu">% de la final:</h1>
						</div>
						<div class="col-md-1 col-12 fila">
							<input id="porcentaje_f" class="input-res" name="textfield" type="text" placeholder="40">
						</div>
						<div class="col-md-2 col-12 fila">
							<button type="button" class="button_add_acto" onclick="addActo()">A√±adir</button>
						</div>
					</div>
					<div class="row container-fluid" style="display:flex;">
						<div class="col-md-6 col-0 fila">
						</div>
						<div class="col-md-3 col-12 fila">
							<h1 class="propiedades_enu">Porcentaje total: </h1>
						</div>
						<div class="col-md-3 col-0 fila"></div>
					</div>
					<hr>
					<div class="row">
						<div class="col-md-8"></div>
						<div class="col-md-4">
							<h1 class="propiedades_title" id="errorAsig">Revisa los porcentajes</h1>
						</div>
					</div>
					<div id="actos_list">
						
					</div>
					<br>
					<button type="button" class="next button_add_acto" onclick="creaAsignatura()"> Crear</button>
					<br><br><br>
				</div>
			</div>
			<script>
				function checkPercent(a){
			        $(a).focusout(function() {
			            if ($(a).val().length > 2 || isNaN(Number($(a).val()))) {
			                $(a).css("border","1px solid red!important");
			            }else{
			    	        $(a).css("border","");
			            }
			        });
		        }
			</script>


			<!--Calcular Asignatura-->
			<div class="col-md-10 col-12 programa asignaturas_list_div" id="calcularAsignatura">
		    	<h1 style="margin-top:6vh;text-align:center;">Calcular nota</h1>
		    	<hr>
		    	<div class="row container-fluid" style="display:flex;">
					<div class="col-md-6 col-12 fila">
							<h1 class="propiedades_enu" id="cargaAsigEscuela">Nom. escuela: 
								
							<h1>
					</div>
					<div class="col-md-6 col-12 fila">
							<h1 class="propiedades_enu" id="cargaAsigNom">Nom. asignatura:</h1>
					</div>
				</div>
		    	<hr>
		    	<ul id="calcu_asig_list">
					<li>Asignatura 1</li>
				</ul>
				<hr>
				<br>
				<center><button type="button" class="next button_add_acto" style="margin:auto!important;margin-top: 20px;margin-bottom: 20px;" onclick="calcularNota(this); selectDIV(5); draw()"> Calcular</button><br><h1 id="error_calculo" style="margin-bottom: 5px!important;"></h1><br><h1 id="error_calculo1" style="margin-top: 0!important;"></h1></center>
				<br><br><br>			    	
			</div>

			<!--Stats Asignatura-->
			<div class="col-md-10 col-12 programa asignaturas_list_div" id="statsAsignatura" style="height: 100vh!important;">
		    	<h1 style="margin-top:6vh;text-align:center;">Estad√≠sticas finales</h1>
		    	<hr>
		    	<div class="row container-fluid" style="display:flex;">
					<div class="col-md-6 col-12 fila">
							<h1 class="propiedades_enu" id="cargaAsigEscuela1">Nom. escuela: 
								
							<h1>
					</div>
					<div class="col-md-6 col-12 fila">
							<h1 class="propiedades_enu" id="cargaAsigNom1">Nom. asignatura:</h1>
					</div>
				</div>
		    	<hr>
		    	<div class="row container-fluid" class="calcu_asig" >
		    		<div class="col-md-5">
		    			<div id="piechart"></div>
		    		</div>
		    		<div class="col-md-7">
		    			<div class="row">
		    				<dir class="col-md-4" id="notaFinalMediaBruta">
		    				</dir>
		    				<dir class="col-md-4" id="notaFinalMediaAprobada"></dir>
		    				<dir class="col-md-4" id="necesitaRecuperar"></dir>
		    			</div>
		    			<hr style="color:#c12a26;!important">
		    			<div class="row">
		    				<dir class="col-md-12">
		    					<ul id="asignaturas_recu_list">
									<li>Est√° vacio, es buena se√±al </li>
								</ul>
		    				</dir>
		    			</div>
		    		</div>
		    	</div>
				<hr style="z-index: 9999;">
				<br>
				<center ><button type="button" class="next button_add_acto" style="margin:auto!important;margin-top: 20px;margin-bottom: 20px;" onclick="selectDIV(4);"> Volver</button><br><h1 id="error_calculo_1" style="margin-bottom: 5px!important;"><br><h1 id="error_calculo1_1" style="margin-top: 0!important;"></h1></center>
				<br><br><br>			    	
			</div>
		</div>
	</div>
	<!--HOME END-->
	<script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>
	<!--animation-->
	<script src="https://unpkg.com/aos@next/dist/aos.js"></script>
	  <script>
	    AOS.init();
	  </script>
	<script>
		/**VARIABLES**/
		listaAsignaturas = []; //contiene los objetos Asignatura
		listaPorcentajesAsig = [] //lista que contendr√° los porcentajes de los examenes de la asignatura seleccionada
		listaNotaMinimaAsig = [] //lista que contendr√° las notas minimas de los examenes de la asignatura seleccionada 
		listaActosSuspendidos = [] //lista que contendr√° los ids de los actos suspendidos a causa de no superar el minimo
		listaActosSuspendidosAsig = [] //lista que contendr√° las asignaturas de los actos suspendidos a causa de no superar el minimo
		listaActosSuspendidosMinimo = []
		listaActosAprobados = [] //lista que contiene los ids de los actos superados
		listaActosSuspendidosNotas = [] //contienen las notas de las asignaturas de los actos suspendidos
		listaActosAprobadosNotas = []
		listaActosSuspendidosNP = [] //lista de notas no presentadas, que son not null
		actosCalculandoNota = [] //lista de actos que se encuentran en el calculo de notas
		notaFinalBruta = 0

		idNota = 0 //id de los textFields
		cantidadIdsNota =0 
	</script>
	<script type="text/javascript" charset="uft-8">
		activado = true
	    const navSlide = () => {
			const burger= document.querySelector('.burger');
			//Toggle nav
			burger.addEventListener('click', () => {
				console.log("hi  " + activado);
				//nav.classList.toggle('nav_active');//burger-menu
				//nav.classList.toggle('burger-menu');
				//Animate links
				if(activado){
					$('#menu').addClass('burger-menu');
					activado = false;
				}else {
					$('#menu').removeClass('burger-menu');
					activado = true;
				}
				//Burger animation
				burger.classList.toggle('toggle');
			});
		}
		navSlide();
	</script>

	<script>
		function selectDIV(e) {
			if(e == 1){
				$('#asignaturas').css("display","none");
				$('#calcularAsignatura').css("display","none");
				$('#creaAsignatura').css("display","none"); 
				$('#statsAsignatura').css("display","none");
				$('#main').css("display","block");
			}else if(e == 2){
				$('#main').css("display","none");
				$('#calcularAsignatura').css("display","none");
				$('#creaAsignatura').css("display","none");
				$('#statsAsignatura').css("display","none");
				$('#asignaturas').css("display","block");
			}else if(e == 3){
				$('#main').css("display","none");
				$('#asignaturas').css("display","none");
				$('#calcularAsignatura').css("display","none");
				$('#statsAsignatura').css("display","none");
				$('#creaAsignatura').css("display","block");
			}else if(e == 4){
				$('#main').css("display","none");
				$('#asignaturas').css("display","none");
				$('#creaAsignatura').css("display","none");
				$('#statsAsignatura').css("display","none");
				$('#calcularAsignatura').css("display","block");
			}else if(e == 5){
				$('#main').css("display","none");
				$('#asignaturas').css("display","none");
				$('#creaAsignatura').css("display","none");
				$('#calcularAsignatura').css("display","none");
				$('#statsAsignatura').css("display","block");
			}
		}
	</script>
	<script>
		/**CALCULAR LA NOTA FINAL**/
		notaFinal = 0 //nota final provisional

		function calcularNota(asignatura) {

		}

		/**Rellena el form con los datos de la asignatura**/
		function calcularAsignaturaRelleno(boton){
			selectDIV(4);
			idNota = 0
			cantidadIdsNota = 0
			//1 encontrar laasignatura
			console.log($("li").index(boton.parentNode.parentNode.parentNode)-5);
			//obtengo la asignatura a calcular
			var asigACalcu = listaAsignaturas[$("li").index(boton.parentNode.parentNode.parentNode)-5];
			document.getElementById('cargaAsigEscuela').innerHTML = 'Nom. escuela: ' + asigACalcu.getEscuela();
			document.getElementById('cargaAsigNom').innerHTML = 'Nom. asignatura: ' + asigACalcu.getAsig(); 
			document.getElementById('cargaAsigEscuela1').innerHTML = 'Nom. escuela: ' + asigACalcu.getEscuela();
			document.getElementById('cargaAsigNom1').innerHTML = 'Nom. asignatura: ' + asigACalcu.getAsig(); 
			//2 encontrar sus parametros, asi como la cantidad de actos
			console.log(asigACalcu.getActos())
			actos = asigACalcu.getActos()
			//2.1 resetear listas
			listaPorcentajesAsig = []
			listaNotaMinimaAsig = []
			//3 rellenar el html con los actos
			document.getElementById("calcu_asig_list").innerHTML=""
			actos.forEach((acto)=>{
				var act =`<li class="lista_asignaturas_style_a">
							<div class="row" style="text-align:center;margin-top:20px;display:flex; flex-direction:row;">
								<div class="col-md-4 col-12">
									<h1 style="margin-top:10px; text-align:center; font-size:20px;vertical-align: center;"> 
									<img src="./img/icons/exam.png" style="margin-top:10px;" class="ico" alt="E">
									<b style="margin-top:10px;">Acto:</b> ${acto.getTipo()}</h1>
								</div>
								<div class="col-md-4 col-12">
									<h1 style="text-align:center; margin-top:10px;font-size:20px;vertical-align: center;"> 
									<img src="./img/icons/percentage.png" style="margin-top:10px;" class="ico" alt="E">
									<b style="margin-top:10px;">Porcentaje:</b> ${acto.getPorcentaje()}</h1>
								</div>
								<div class="col-md-2 col-12" style="display:flex; flex-direction:row; text-align:center;margin:0;">
									<h1 style="text-align:center;margin-top:10px; font-size:20px;vertical-align: center;"> 
									<img src="./img/icons/report.png" style="margin-top:10px; margin:auto;" class="ico" alt="E"><b>Acto: </b></h1>
								</div
								<div class="col-md-2 col-12" style="width:100%;">
									<input class="input-res-m" name="textfield" id="${'nota'+idNota}" type="text" placeholder="nota" onchange="checkNumber(this)">
								</div>
							</div>
						</li>`
				idNota ++
				document.getElementById("calcu_asig_list").insertAdjacentHTML("beforeend", act);
				listaPorcentajesAsig.push(acto.getPorcentaje()); 
				listaNotaMinimaAsig.push(acto.getNotaMin())
				actosCalculandoNota.push(acto)
			})
			console.log(listaPorcentajesAsig + listaNotaMinimaAsig)
		}

		function checkNumber(a){
			$(a).focusout(function() {
			    if ($(a).val().length > 2 || isNaN(Number($(a).val()))) {
			        $(a).css("border","1px solid red!important");
			    }else{
			    	$(a).css("border","");
			    }
			});
		}

		/**Relleno la asignatura con las notas**/
		function rellenar(nota, acto){
			acto.setNota(document.getElementById(nota).value)
			console.log(acto.getNota())
			//rellenar(this, ${acto})
		}

		function calcularNota(){
			notaFinal = 0
			notaFinalBruta = 0
			listaActosSuspendidos = [] //reseteo la lista de actos suspendidos para poder a√±adir actos a stats
			listaActosSuspendidosNotas = []
			listaActosSuspendidosMinimo = []
			listaActosAprobados = []
			listaActosAprobadosNotas = []
			listaActosSuspendidosNP = []
			listaActosSuspendidosAsig = []
			listaActosNotas = []

			$('#error_calculo').css("display","none");
			$('#error_calculo1').css("display","none");
			$('#error_calculo_1').css("display","none");
			$('#error_calculo1_1').css("display","none");
			var id = 0
			for(id = 0; id < idNota; id++){
				console.log(document.getElementById('nota'+id).value)
				if(isNaN(parseFloat(document.getElementById('nota'+id).value) )){//|| document.getElementById('nota'+id).value > 10.0)){
					listaActosSuspendidosNP.push(id)
					listaActosNotas.push(0)
					document.getElementById('error_calculo1').innerHTML = '‚û§ Recuerda: una nota es un n√∫mero ü§≠!'
					document.getElementById('error_calculo1_1').innerHTML = '‚û§ Recuerda: una nota es un n√∫mero ü§≠!'
					$('#error_calculo1').css("display","block");
					$('#error_calculo1_1').css("display","block");
					//document.getElementById('nota'+id).value.innerHTML = '0'
				}else if(listaNotaMinimaAsig[id] > (document.getElementById('nota'+id).value)){
					//listaActosSuspendidos.push(id) //a√±ado el id del acto cateado por nota minima o no presentado
					listaActosSuspendidosMinimo.push(document.getElementById('nota'+id).value) //a√±ado la nota
					notaFinalBruta += listaPorcentajesAsig[id]/100 * parseFloat((document.getElementById('nota'+id).value))
					listaActosNotas.push(document.getElementById('nota'+id).value)
					//a√±ado los actos cateados
				}else if (listaNotaMinimaAsig[id] <= (document.getElementById('nota'+id).value) && (document.getElementById('nota'+id).value) < 5.0) {
					listaActosSuspendidos.push(document.getElementById('nota'+id).value) //a√±ado la nota
					notaFinal += listaPorcentajesAsig[id]/100 * parseFloat((document.getElementById('nota'+id).value))
					notaFinalBruta += listaPorcentajesAsig[id]/100 * parseFloat((document.getElementById('nota'+id).value))
					listaActosNotas.push(document.getElementById('nota'+id).value)
				}else{
					listaActosAprobados.push(id)
					listaActosAprobadosNotas.push(document.getElementById('nota'+id).value)
					notaFinal += listaPorcentajesAsig[id]/100 * parseFloat((document.getElementById('nota'+id).value))
					notaFinalBruta += listaPorcentajesAsig[id]/100 * parseFloat((document.getElementById('nota'+id).value))
					listaActosNotas.push(document.getElementById('nota'+id).value)
				}

				/**errores**/
				if(document.getElementById('nota'+id).value > 10.0){
					document.getElementById('error_calculo').innerHTML = '‚û§ Tienes notas que superan 10.0 puntos üòã'
					document.getElementById('error_calculo_1').innerHTML = '‚û§ Tienes notas que superan 10.0 puntos üòã'
					$('#error_calculo').css("display","block");
					$('#error_calculo_1').css("display","block");
				}
			}
			console.log("FIN: " +notaFinal)
			//RELLENO LA PARTE ESTADISTICA CON LAS NOTAS BASICAS
			document.getElementById('notaFinalMediaBruta').innerHTML = 'Nota media bruta: ' + notaFinalBruta.toFixed(3); 
			document.getElementById('notaFinalMediaAprobada').innerHTML = 'Nota media en la parte aprobada: ' + notaFinal.toFixed(3);
			var recu = "NO! üòì"
			//compruebo si hace falta ir a recu
			if(listaActosSuspendidosMinimo.length == 0 && notaFinal >= 5.0){
				recu = "SI! ü•∞"
			}
			document.getElementById('necesitaRecuperar').innerHTML = 'Aprobado? : ' + recu;
			document.getElementById("asignaturas_recu_list").innerHTML =""

			/**A rehacer bien**/
			/*var listaNotasARepesca = []
			//a√±ado la lista de asignaturas suspendidas calculando la nota necesaria para aprobar
			listaActosSuspendidos.forEach((act)=>{
				var notaAct = listaActosSuspendidosNotas[act]
				var porcentajeAct = listaPorcentajesAsig[act]
				var notaASacar = 0
				var i1
				for(i1 = 0; i1 <= 10 && (porcentajeAct*i1+notaFinal) < 5; i1+=0.001){
					notaASacar = i1
				}
				if((notaASacar * porcentajeAct + notaFinal) < 5.0){
					//notaASacar = '10.0, No suficiente!'
				}

				listaActosSuspendidosAsig.push(actos[act])
				var recu =`<li class="lista_asignaturas_style_a">
							<div class="row" style="text-align:center;margin-top:20px;display:flex; flex-direction:row;">
								<div class="col-md-3 col-12">
									<h1 style="margin-top:10px; text-align:center; font-size:10px;vertical-align: center;"> 
									<img src="./img/icons/exam.png" style="margin-top:10px;" class="ico" alt="E">
									<b style="margin-top:10px;">Acto:</b> ${actos[act].getTipo()}</h1>
								</div>
								<div class="col-md-3 col-12">
									<h1 style="text-align:center; margin-top:10px;font-size:10px;vertical-align: center;"> 
									<img src="./img/icons/percentage.png" style="margin-top:10px;" class="ico" alt="E">
									<b style="margin-top:10px;">Nota:</b> ${listaActosNotas[act]}</h1>
								</div>
								<div class="col-md-3 col-12">
									<h1 style="text-align:center; margin-top:10px;font-size:10px;vertical-align: center;"> 
									<img src="./img/icons/percentage.png" style="margin-top:10px;" class="ico" alt="E">
									<b style="margin-top:10px;">Nota m√≠n:</b> ${actos[act].getNotaMin()}</h1>
								</div>
								<div class="col-md-3 col-12" style="display:flex; flex-direction:row; text-align:center;margin:0;">
									<h1 style="text-align:center;margin-top:10px; font-size:10px;vertical-align: center;"> 
									<img src="./img/icons/report.png" style="margin-top:10px; margin:auto;" class="ico" alt="E"><b>A sacar: </b></h1>${notaASacar}</h1>
								</div
							</div>
						</li>`
				//document.getElementById("asignaturas_recu_list").insertAdjacentHTML("beforeend", recu);
			})*/
		}		
	</script>
	<script>
		/**CreaAsignatura**/
		function creaAsignatura(){
			var nomEscuela = document.getElementById("nomEscuela_f").value;
			var nomAsignatura = document.getElementById("nomAsignatura_f").value;
			contador = 1 //reseteo el contador de
			listaAsignaturas.push(new Asignatura(nomEscuela,nomAsignatura,asignaturasActuales))
			console.log("ASIG:" + asignaturasActuales)
			setTimeout(()=>{
				asignaturasActuales = []//reseteo la lista para usarla de nuevo
				//limpio los actos
				actos_list.innerHTML = ""
				console.log("ASIG pos:" + asignaturasActuales)
			},1);
			//saveJSON(listaAsignaturas);

			//voy a la ventana de asignaturas al crear la asignatura
			//selectDIV(2) //descomentar al acabar los tests
			console.log(listaAsignaturas)
			mostrarListaAsignaturas()
		}

		//Guarda la lista de asignaturas en un JSON
		function saveJSON(data){
			//data type Asignatura
			for(var i in listaAsignaturas){
				//listaAsignaturas[i].
			}
			json = JSON.stringify(data);
			localStorage.setItem("AsignaturasJSON", json);
			console.log(localStorage)
		}

		function loadJSON(){
			text = localStorage.getItem("AsignaturasJSON");
			data = JSON.parse(text);
			//reinicio la lista
			//listaAsignaturas = []
			var listaAsignaturas1 = []
			for(var i in data)
    			//listaAsignaturas1.push([(Asignatura)data [i]]);
			//mostrarListaAsignaturas();
			console.log("Cargando: "+listaAsignaturas1)
		}

		//loadJSON();
	</script>
	<script>
		function deletear() {
			console.log(listaAsignaturas.indexOf(document.getElementById(this)))
		}

		//borra la lista de asignaturas para elegir y las rellena de nuevo desde el array que contiene los
		//objetos Asignatura
		function mostrarListaAsignaturas(){

			document.getElementById("asignaturas_list").innerHTML = "";

			listaAsignaturas.forEach(function(elemento){
				/*
				var li = document.createElement("LI");
				li.appendChild(document.createTextNode(elemento.toString()));
				document.getElementById("asignaturas_list").appendChild(li);*/



				//modelo la fila de la asignatura que aparecera en la lista
				var asignatura =`<li class="lista_asignaturas_style">
									<div class="row" style="display:flex; flex-direction:row;">
										<div class="col-md-9" style="margin-top: 20px;">
											<div class="row" style="text-align:center;">
												<div class="col-md-4 col-12">
													<h1 style="text-align:center; font-size:20px;vertical-align: center;"> 
													<img src="./img/icons/school1.png" class="ico" alt="E">
													<b>Escuela:</b> ${elemento.getEscuela()}</h1>
												</div>
												<div class="col-md-4 col-12">
													<h1 style="text-align:center; font-size:20px;vertical-align: center;"> 
													<img src="./img/icons/book.png" class="ico" alt="E">
													<b>Asignatura:</b> ${elemento.getAsig()}</h1>
												</div>
												<div class="col-md-4 col-12">
													<h1 style="text-align:center; font-size:20px;vertical-align: center;"> 
													<img src="./img/icons/exam.png" class="ico" alt="E">
													<b>N¬∫Actos:</b> ${elemento.getActosL()}</h1>
												</div>
											</div>
										</div>
										<div class="col-md-2" style="vertical-align: middle;display:flex;flex-direction:row;" id="5">
											<button type="button" class="button_select c" onclick="calcularAsignaturaRelleno(this)" >Cargar</button>
											<button type="button" style="border-color: #c12a26;margin-left:5px;" class="c button_select" onclick="deleteAsig(this)" >Eliminar</button>
										</div>
										<divc class="col-1">
											
										</div>
									</div>
								</li>`
				document.getElementById("asignaturas_list").insertAdjacentHTML("beforeend", asignatura);
			});
		}

		function deleteAsig(b){
			var txt;
		    if (confirm("Seguro que quieres eliminar la asignatura?")) {
		      	//eliminar despues de la listageneral (TERMINAR)
		      	//console.log(document.getElementById("asignaturas_list").removeChild(document.getElementById(this.parentNode.id));
				console.log($("li").index(b.parentNode.parentNode.parentNode)-5);
				//console.log(document.getElementById("asignaturas_list").indexOf(document.getElementById(b.parentNode.parentNode.parentNode.id)))
				//listaAsignaturas[$("li").index(b.parentNode.parentNode.parentNode)-5)].remove();
				listaAsignaturas.splice($("li").index(b.parentNode.parentNode.parentNode)-5, 1 );
		      	mostrarListaAsignaturas();
		      	//document.getElementById("listaAsignaturas").
		    } else {
		      	alert("Menos mal!");
		    }
		}
		function cargarAsig(){
			alert("Cargando Asignatura!");
		}
	</script>
	<script>
		form = 0
		function nextForm(e) {
			if(form == 0 && e == 1){
				$('#creaAsignatura').css("display","none");
				$('#creaAsignatura1').css("display","none");
				$('#creaAsignatura1').css("display","block");
				form ++;
			}else if(form == 1 && e == 0){
				$('#creaAsignatura').css("display","none");
				$('#creaAsignatura1').css("display","none");
				$('#creaAsignatura').css("display","block");
				form --;
			}
		}
	</script>
	<script>
		function deletear() {
			document.getElementById("actos_list").removeChild(document.getElementById(this.parentNode.id))
		}
		sumaPercent = 0
		contador = 1;
		asignaturasActuales = [] //contiene las asignaturas actuales
		//ADD ACT LIST ELEMENT
		function addActo() {
			//var nomEscuela = document.getElementById("nomEscuela_f").value;
			//var nomAsignatura = document.getElementById("nomAsignatura_f").value;
			var tipoActo = document.getElementById("tipoActo_f").value;
			var notaMin = document.getElementById("notaMin_f").value;
			var porcentaje = document.getElementById("porcentaje_f").value;
			if(sumaPercent + porcentaje <= 100){
				$('#errorAsig').css("display","none");
			}else {
				$('#errorAsig').css("display","block");
			}
			if(tipoActo != "" &&
				notaMin != "" && porcentaje!= ""){
				var fila = document.createElement("DIV");
				fila.setAttribute("style", "height: 100%;border-color:black;");
				fila.setAttribute("style", "background-color:white;");
				var info = document.createTextNode(contador + " -Acto [ "+ tipoActo +" ] nota m√≠nima [ "+
					notaMin + " ] porcentaje [ " + porcentaje + "% ].");
				contador++
				var borrar = document.createElement("BUTTON");
				borrar.innerHTML = "X";
				borrar.setAttribute("style","position:absolute; height:30px;text-color: black; width: 40px; border-radius: 80px;margin:0;margin-top: 14px; background-color:white;border-color: black;padding-top: -20px!important;font-size: 15px;border-color:#c00;");
				borrar.onclick = function() {
					document.getElementById("actos_list").removeChild(this.parentNode)
				}
				fila.appendChild(info);
				fila.appendChild(borrar)
				document.getElementById("actos_list").appendChild(fila);
				//sumo asignatura a la lista de asignaturas
				asignaturasActuales.push(new Acto(tipoActo, notaMin, porcentaje));
			}else{
				console.log("rellena todo")
			}

		}
	</script>
	<script>

		//notaSuspendidos += listaPorcentajesAsig[a]/100;
	  function draw(){
	  	  google.charts.load('current', {'packages':['corechart']});
	      google.charts.setOnLoadCallback(drawChart);

	      function drawChart() {
	      	var notaSuspendidos;
	      	var notaAprobados;
	      	var notaNulo; 

	      	for(let a = 0; a < listaActosSuspendidosNotas.length; a ++){
	      		notaSuspendidos += listaPorcentajesAsig[a]/100;
	      	}

	      	for(let a = 0; a < listaActosAprobadosNotas.length; a ++){
	      		notaAprobados += listaPorcentajesAsig[a]/100;
	      	}

	        var data = google.visualization.arrayToDataTable([
	          ['Acto', 'NotaFinal'],
	          ['Examenes no aptos > m√≠nimo',listaActosSuspendidos.length],
	          ['Examenes aptos', listaActosAprobados.length],
	          ['Datos anomalos', listaActosSuspendidosNP.length],
	          ['Examenes no aptos < m√≠nimo', listaActosSuspendidosMinimo.length]
	        ]);

	        var options = {
	          title: 'Representaci√≥n gr√°fica de notas'
	        };

	        var chart = new google.visualization.PieChart(document.getElementById('piechart'));

	        chart.draw(data, options);
	      }
	  }
	</script>
	<script>
		class Acto {
			constructor(tipoActo, notaMin, porcentaje, nota) {
				this.tipoActo = tipoActo;
				this.notaMin = notaMin;
				this.porcentaje = porcentaje;
				this.nota = nota;
			}

			toString() {
				return ("Acto [ "+ this.tipoActo +" ] nota m√≠nima [ "+
					this.notaMin + " ] porcentaje [ " + this.porcentaje + "% ].")
			}

			getTipo() {
				return this.tipoActo;
			}

			getNotaMin() {
				return this.notaMin;
			}

			getPorcentaje() {
				return this.porcentaje;
			}

			getNota() {
				return this.nota;
			}

			setNota(nota) {
				this.nota = nota;
			}
		}

		class Asignatura{
			constructor(nomEscuela, nomAsig, actos){
				this.nomEscuela = nomEscuela;
				this.nomAsig = nomAsig;
				this.actos = actos;
			}

			toString(){
				return (">Escuela: [" + this.nomEscuela + "] Asignatura: [ "+this.nomAsig + "] Actos: ["+ this.actos.length+"].");
			}

			getEscuela() {
				return this.nomEscuela;
			}

			getAsig() {
				return this.nomAsig;
			}

			getActos() {
				return this.actos;
			}

			getActosL(){
				return this.actos.length;
			}
		}		



		/**DECLARACION DE ALGUNA ASIGNATURAS**/
		EDA = new Asignatura("ETSINF", "EDA(CD)",[new Acto("Examen1",3,45),new Acto("Lab1",0,10),new Acto("Lab2",0,10),new Acto("Lab Entregas",0,5),new Acto("Preg. √ölt. M√≠n. 1",0,10),new Acto("Preg. √ölt. M√≠n. 2",0,10),new Acto("Preg. √ölt. M√≠n. 3",0,10)])
		ATD = new Asignatura("ETSINF", "ATD(CD)",[new Acto("Examen1",3,22.5),new Acto("Examen2",3,22.5),new Acto("Proyecto1",0,13.33333),new Acto("Proyecto2",0,13.33333),new Acto("Proyecto3",0,13.33333),new Acto("Portafolio1",0,7.5),new Acto("Portafolio2",0,7.5)])
		BDA = new Asignatura("ETSINF", "BDA(CD)",[new Acto("Examen1",0,35.0),new Acto("Examen2",0,35.0),new Acto("Prueba corta1",0,5.0),new Acto("Prueba corta2",0,5.0),new Acto("Trabajo acad.",0,20.0)])
		AIC = new Asignatura("ETSINF", "AIC(G)",[new Acto("Examen",0,35.0),new Acto("Examen2",0,35.0),new Acto("Practicas",0,20.0),new Acto("Test1",0,2.5),new Acto("Test2",0,2.5),new Acto("Test3",0,2.5),new Acto("Test4",0,2.5)])



		listaAsignaturas.push(EDA)
		listaAsignaturas.push(ATD)
		listaAsignaturas.push(BDA)
		listaAsignaturas.push(AIC)
		mostrarListaAsignaturas()
	</script>

	<script>
		/**Calculo de la mejor opcion**/

	</script>
</body>
</html>
